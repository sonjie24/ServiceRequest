<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
<<<<<<< Updated upstream
<<<<<<< Updated upstream
<<<<<<< Updated upstream
  <title>Cylx Technologies Inc.</title>
=======
  <title>Print Service Request</title>
>>>>>>> Stashed changes
=======
  <title>Print Service Request</title>
>>>>>>> Stashed changes
=======
  <title>Print Service Request</title>
>>>>>>> Stashed changes
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
<<<<<<< Updated upstream
<<<<<<< Updated upstream
<<<<<<< Updated upstream
=======
=======
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
      background: #fff;
    }
    h2 {
      text-align: center;
<<<<<<< Updated upstream
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
    }
    table {
      width: 100%;
      border-collapse: collapse;
<<<<<<< Updated upstream
<<<<<<< Updated upstream
<<<<<<< Updated upstream
      font-size: 14px;
    }
    td, th {
      border: 1px solid #000;
      padding: 4px 6px;
      vertical-align: top;
    }
    .no-border {
      border: none;
    }
    .section-title {
      font-weight: bold;
      text-align: center;
      background-color: #f2f2f2;
    }
    .signature-block td {
      border: 2px solid #000;
      height: 40px;
      text-align: center;
    }
    .checkbox-cell {
      width: 30px;
      text-align: center;
    }
    .page-border {
      border: 2px solid #000;
      padding: 20px;
    }
    .small {
      font-size: 12px;
=======
=======
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
      margin-top: 20px;
    }
    td {
      padding: 8px;
      border: 1px solid #ccc;
<<<<<<< Updated upstream
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
    }
    button {
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    @media print {
      button {
        display: none;
      }
    }
  </style>
</head>
<body>
<<<<<<< Updated upstream
<<<<<<< Updated upstream
<<<<<<< Updated upstream
<h2 style="text-align:center;">SERVICE REQUEST FORM</h2>

<table class="page-border">
  <tr>
    <td>DATE REQUESTED:</td>
    <td colspan="2" id="date_requested"></td>
    <td>SERVICE REQUEST #:</td>
    <td id="service_request_no"></td>
  </tr>
  <tr>
    <td>DEPARTMENT:</td>
    <td colspan="2" id="department"></td>
    <td>MODULE:</td>
    <td id="module"></td>
  </tr>
  <tr>
    <td>FORM #:</td>
    <td id="system_form_no"></td>
    <td>SYSTEM FORM NAME:</td>
    <td colspan="2" id="system_form_name"></td>
  </tr>
</table>

<table class="page-border">
  <tr class="section-title">
    <td colspan="3" style="background-color: #c4ebf1;">CONCERN TYPE</td>
    <td colspan="2" style="background-color: #c4ebf1;">LEVEL OF PRIORITY</td>
  </tr>
  <tr>
    <td class="checkbox-cell" id="concern_type_new"></td>
    <td colspan="2">New (Function/Field/Entry/Column/Row)</td>
    <td class="checkbox-cell" id="priority_set"></td>
    <td>Basic - Committed Date:</td>
  </tr>
  <tr>
    <td class="checkbox-cell" id="concern_type_rev"></td>
    <td colspan="2">Revision (Enhancement of Existing)</td>
    <td class="checkbox-cell" id="priority_immediate"></td>
    <td>Immediate</td>
  </tr>
  <tr>
    <td class="checkbox-cell" id="concern_type_del"></td>
    <td colspan="2">Delete (Dropped Query/Function/Row/Column/Data Point)</td>
    <td class="checkbox-cell" id="priority_add"></td>
    <td>Addtl Customization/Outside Scope</td>
  </tr>
  <tr>
    <td class="checkbox-cell" id="concern_type_cos"></td>
    <td colspan="4">Cosmetic (Fonts/Color/Header/Footer)</td>
  </tr>
  <tr>
    <td class="checkbox-cell" id="concern_type_data"></td>
    <td colspan="4">Data (Override/Deletion)</td>
  </tr>
</table>

<table id="dataPointsTable" class="page-border">
  <tr class="section-title">
    <td style="background-color: #c4ebf1;">DATA POINTS</td>
    <td style="background-color: #c4ebf1;">REFERENCE DATA FIELD</td>
  </tr>
  <tr><td>1)</td><td></td></tr>
  <tr><td>2)</td><td></td></tr>
  <tr><td>3)</td><td></td></tr>
  <tr><td>4)</td><td></td></tr>
  <tr><td>5)</td><td></td></tr>
  <tr>
    <td colspan="2" class="small"><i>Note: Additional concerns may be written on the back page.</i></td>
  </tr>
</table>

<table class="signature-block" >
   <tr>
    <td id="user"></td>
    <td id="department_head"></td>
    <td id="it_head"></td>
  </tr>
  <tr>
    <td><b>USER</b></td>
    <td><b>DEPARTMENT HEAD</b></td>
    <td><b>IT HEAD</b></td>
  </tr>
   <tr>
    <td id="integrator"></td>
    <td id="developer"></td>
    <td id="qa"></td>
  </tr>
 
  <tr>
    <td><b>INTEGRATOR</b></td>
    <td><b>DEVELOPER</b></td>
    <td><b>QA</b></td>
  </tr>
 
</table>

<table class="page-border">
  <tr>
    <td class="checkbox-cell" id="print_option_as_req"></td>
    <td>Print Out as per User Request</td>
    <td id="print_out_date"></td>
  </tr>
  <tr>
    <td class="checkbox-cell" id="print_option_sys_print"></td>
    <td>Current System Print Out</td>
    <td id="system_print_date"></td>
  </tr>
  <tr>
    <td class="checkbox-cell" id="print_option_modified"></td>
    <td>Modified/Revised Print Out</td>
    <td id="patch_date"></td>
  </tr>
</table>

<button onclick="window.print()">üñ®Ô∏è Print</button>

<script>
  function checkMark(value) {
    return value === "Yes" ? "‚òë" : "‚òê";
  }

  const record = {
    "row_number": 10,
    "id": 9,
    "type": "actual",
    "uuid": "3ab0d2be-3916-42c1-9ece-eaa7b6290ae5",
    "project": "CNIMS",
    "date_requested": "2025-07-24",
    "service_request_no": "CNIMS-2025-07-0005",
    "req_status": "Pending",
    "cylix_status": "Accepted",
    "dev_status": "For Development",
    "department": "BUSINESS PERMITS AND LICENSING OFFICER",
    "module": "BPLS",
    "system_form_no": "CMIS00239",
    "system_form_name": "Business Master List",
    "memo": "",
    "concern_type_new": "No",
    "concern_type_rev": "No",
    "concern_type_del": "No",
    "concern_type_cos": "No",
    "concern_type_data": "Yes",
    "priority_set": "No",
    "committed_date": "",
    "priority_immediate": "Yes",
    "priority_add": "No",
    "user_id": 913,
    "user": "Jec S. Carretas",
    "department_head_id": 1111,
    "department_head": "",
    "it_head_id": 250,
    "it_head": "Romeo B. Empleo Jr.",
    "integrator_id": 24,
    "integrator": "Michael V Tan",
    "developer_id": 21,
    "developer": "Richard A. Porras",
    "qa_id": 24,
    "qa": "Michael V Tan",
    "print_option_as_req": "No",
    "print_out_date": "",
    "print_option_sys_print": "No",
    "system_print_date": "",
    "print_option_modified": "No",
    "patch_date": ""
  };

  window.addEventListener("DOMContentLoaded", () => {
    // Fill basic info
    document.getElementById("date_requested").innerHTML = `<strong>${record.date_requested}</strong>`;
    document.getElementById("service_request_no").innerHTML = `<strong>${record.service_request_no}</strong>`;
    document.getElementById("department").innerHTML = `<strong>${record.department}</strong>`;
    document.getElementById("module").innerHTML = `<strong>${record.module}</strong>`;
    document.getElementById("system_form_no").innerHTML = `<strong>${record.system_form_no}</strong>`;
    document.getElementById("system_form_name").innerHTML = `<strong>${record.system_form_name}</strong>`;

    // Fill checkbox sections
    document.getElementById("concern_type_new").textContent = checkMark(record.concern_type_new);
    document.getElementById("concern_type_rev").textContent = checkMark(record.concern_type_rev);
    document.getElementById("concern_type_del").textContent = checkMark(record.concern_type_del);
    document.getElementById("concern_type_cos").textContent = checkMark(record.concern_type_cos);
    document.getElementById("concern_type_data").textContent = checkMark(record.concern_type_data);
    document.getElementById("priority_set").textContent = checkMark(record.priority_set);
    document.getElementById("priority_immediate").textContent = checkMark(record.priority_immediate);
    document.getElementById("priority_add").textContent = checkMark(record.priority_add);

    // Signatories
    document.getElementById("user").textContent = record.user;
    document.getElementById("department_head").textContent = record.department_head || "RICHARD PORRAS";
    document.getElementById("it_head").textContent = record.it_head;
    document.getElementById("integrator").textContent = record.integrator;
    document.getElementById("developer").textContent = record.developer;
    document.getElementById("qa").textContent = record.qa;

    // Print Options
    document.getElementById("print_option_as_req").textContent = checkMark(record.print_option_as_req);
    document.getElementById("print_option_sys_print").textContent = checkMark(record.print_option_sys_print);
    document.getElementById("print_option_modified").textContent = checkMark(record.print_option_modified);
    document.getElementById("print_out_date").textContent = record.print_out_date || "";
    document.getElementById("system_print_date").textContent = record.system_print_date || "";
    document.getElementById("patch_date").textContent = record.patch_date || "";

    // Optional auto-print
    // setTimeout(() => window.print(), 500);

    const dataPoints = [
  {
    row_number: 5,
    MainGUID: "3ab0d2be-3916-42c1-9ece-eaa7b6290ae5",
    data_point: "Dili ma save and Retrieve ang date sa Fire",
    ref_field: "Expiry Date Filter"
  }
];

// Populate DATA POINTS table
const table = document.getElementById("dataPointsTable");
dataPoints.forEach((item, index) => {
  // Skip the first two rows (header + 5 default rows) and the note row at the end
  if (index < 5) {
    const row = table.rows[index + 1]; // +1 to skip header row
    if (row) {
      row.cells[0].textContent = `${index + 1}) ${item.data_point}`;
      row.cells[1].textContent = item.ref_field;
    }
  }
});
  });
</script>

=======
=======
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
  <h2>Service Request Form</h2>
<table>
    <tr>
        <td width="25%"><strong>DATE REQUESTED:</strong></td>
        <td width="15%" id="date_requested"></td>
        <td width="28%"><strong>SERVICE REQUEST #:</strong></td>
        <td width="30%" id="req_no"></td>
    </tr>
    <tr>
        <td><strong>DEPARTMENT:</strong></td>
        <td colspan="3" id="department"></td> <!-- spanning across 3 columns -->
    </tr>
        <tr>
        <td><strong>MODULE:</strong></td>
        <td colspan="3" id="department"></td> <!-- spanning across 3 columns -->
    </tr>
        <tr>
        <td width="20%"><strong>FORM #:</strong></td>
        <td width="30%" id="date_requested"></td>
        <td width="20%"><strong>SYSTEM FORM NAME:</strong></td>
        <td width="30%" id="req_no"></td>
    </tr>
    <tr>
        <td colspan="2" align="center" style="background-color: #c4ebf1"><strong>COCERN TYPE:</strong></td>
        <td colspan="2" align="center" style="background-color: #c4ebf1"><strong>LEVEL OF PRIORITY</strong></td>
    </tr>
    <tr>
        <td colspan="2"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> New (Function/Field/Entry/Column/Row)</td>
        <td colspan="1"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> Basic - Committed Date:</td>
        <td colspan="1"></td>

    </tr>
     <tr>
        <td colspan="2"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> Revision (Enhancement of Existing)</td>
        <td colspan="2"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> Immediate:</td>
    </tr>
    <tr>
        <td colspan="2"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> Delete (Dropped Query/Function/Row/Column/Data Point)</td>
        <td colspan="2"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> Additional Customization/Outide Scope</td>
    </tr>
     <tr>
        <td colspan="2"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> Cosmetic (Fonts/Color/Header/Footer)</td>
        <td colspan="2"></td>
    </tr>
     <tr>
        <td colspan="2"><input style="transform: scale(1.5); margin-right: 6px;" type="checkbox" checked="" name="1" value="1"> Data (Override/Deletion)</td>
        <td colspan="2"></td>
    </tr>
     <tr>
        <td width="60%" align="center" colspan="2" style="background-color: #c4ebf1">DATA POINTS:</td>
        <td width="40%" align="center" colspan="2" style="background-color: #c4ebf1">REFERENCE DATA FIELD</td>
    </tr>
    <tr>
        <td height="20px" width="60%"  colspan="2" ></td>
        <td width="40%"  colspan="2" ></td>
    </tr>
     <tr>
        <td height="20px" width="60%"  colspan="2" ></td>
        <td width="40%"  colspan="2" ></td>
    </tr>
     <tr>
        <td height="20px" width="60%"  colspan="2" ></td>
        <td width="40%"  colspan="2" ></td>
    </tr>
     <tr>
        <td height="20px" width="60%"  colspan="2" ></td>
        <td width="40%"  colspan="2" ></td>
    </tr>
     <tr>
        <td height="20px" width="60%"  colspan="2" ></td>
        <td width="40%"  colspan="2" ></td>
    </tr>
    <tr>
        <td colspan="4"><i>Note: Additional concerns may be written on the back page.</i></td>
    </tr>
   <tr>
        <td height="20px"></td>
        <td height="20px"></td>
        <td height="20px"></td>
    </tr>
</table>

  <button onclick="window.print()">üñ®Ô∏è Print</button>

  <script src="../js/config.js"></script>
  <script>
    async function loadPrintData() {
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get("id");

      if (!id) {
        alert("Missing request ID.");
        return;
      }

      try {
        const res = await fetch(`${API_BASE_URL}/get-one`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ service_request_no: id })
        });

        const json = await res.json();
        const record = json.data;

        if (!record) {
          alert("Request not found.");
          return;
        }

        // Fill table fields
        document.getElementById("req_no").textContent = record.service_request_no || "-";
        document.getElementById("date_requested").textContent = record.date_requested || "-";
        document.getElementById("module").textContent = record.module || "-";
        document.getElementById("form").textContent = record.system_form_name || "-";
        document.getElementById("concern").textContent = record.concern || "-";

        // Auto-print after DOM updates
        setTimeout(() => {
          requestAnimationFrame(() => window.print());
        }, 300);

      } catch (err) {
        console.error("Failed to load print data:", err);
        alert("Something went wrong loading the request.");
      }
    }

    window.addEventListener("DOMContentLoaded", loadPrintData);
  </script>
<<<<<<< Updated upstream
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
</body>
</html>
